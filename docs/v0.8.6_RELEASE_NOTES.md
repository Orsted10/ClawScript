# VoltScript v0.8.6 Release Notes

VoltScript v0.8.6 is a major performance and stability release, introducing a new bytecode virtual machine, string interning, and significant optimizations across the entire system.

## ğŸš€ Key Performance Enhancements

### 1. Stack-based Bytecode VM
A new high-performance bytecode VM has been introduced alongside the traditional tree-walk interpreter. 
- **Up to 2.5x performance increase** for CPU-bound tasks like loops and recursive calculations.
- Optimized opcode set for common operations.
- Faster variable access and stack management.

### 2. Thread-safe String Interning
All strings and identifiers are now interned in a global, thread-safe `StringPool`.
- **O(1) String Comparison**: Comparing interned strings is now a simple pointer comparison.
- **Reduced Memory Footprint**: Duplicate strings share the same memory location.
- Automatic interning for all tokens and literals.

### 3. Environment Lookup Caching
Variable lookups in deeply nested scopes or recursive functions are now optimized via a lookup cache in the `Environment` class.

## ğŸ› ï¸ New Features

- **AST-to-Bytecode Compiler**: A new compiler that transforms the Abstract Syntax Tree into optimized bytecode chunks.
- **Enhanced CMake Integration**: Updated build system with better support for benchmarks and performance testing.
- **Comprehensive Benchmarking Suite**: New benchmark tools to measure and track performance gains across releases.

## ğŸ Bug Fixes & Stability

- Resolved issues with undefined global variable handling in the VM.
- Fixed `GroupingExpr` member access in the compiler.
- Improved error reporting for bytecode execution.
- Consolidated test sources for faster build times.

## ğŸ“ˆ Test Coverage

- Added **extenisve VM unit tests** covering arithmetic, control flow, and scoping.
- **585 passing tests** across all suites (Lexer, Parser, Interpreter, VM).
- New integration tests for v0.8.6 features.

## ğŸ”— Migration

v0.8.6 is fully backward compatible. For more details, see the [Migration Guide](MIGRATION_GUIDE.md).
